---
title: CSAPP_chapter_2
date: 2023-01-12 19:34:26
tags: CSAPP
---
# 第二章 信息的表示和处理
## 2.1 信息存储
#### 2.1.1 十六进制表示法：
- 开头0x，后可大小写混合
- 进制转换：
  - 十进制->十六进制  
$n_{[10]}=4\times i+j,则n_{[16]}=2^{i}\times 10^j$
  - 十进制->十六进制  
辗转相除，余数逆序写出
<!-- more -->

#### 2.1.2 字数据大小：
- 指针数据大小由计算机字长决定
#### 2.1.3 寻址和字节顺序：
- 小端or大端，大端序直观（互联网传输），一般机器使用小端模式
```c++
#include<stdio.h>
typedef unsigned char *pointer;

void show_bytes(pointer start, size_t len)
{
    size_t i;
    for(i=0;i<len;i++)
        printf("%p\t0x%.2x\n",start+i,start[i]);
        //%p:print pointer; %x:print hexadecimal
    printf("\n");
}
  
int main()
{
    int a=15213;
    printf("int a=15213;\n");
    show_bytes((pointer)&a,sizeof(int));
}
//int a=15213;
// 000000e7a57ffa5c        0x6d
// 000000e7a57ffa5d        0x3b
// 000000e7a57ffa5e        0x00
// 000000e7a57ffa5f        0x00
```
#### 2.1.4 表示字符串
- ASCII码
- Unicode（JAVA表示字符串）
#### 2.1.5 表示代码
- 程序是字节序列
#### 2.1.6 布尔代数
- 位向量，$a_{w-1}在左，a_0在右$
- 运算
  - 与&：集合交集
  - 或|：集合并集
  - 非~：单集合补集
  - 异或^：集合对称差
#### 2.1.7 C语言中的位级运算
- 基本符号
  - | OR
  - & AND
  - ~ NOT
- 掩码
#### 2.1.8 C语言中的逻辑运算
- 得到true or false
- 基本符号
  - && 
  - || 
  - ！
#### 2.1.9 C语言中的移位运算
- 算数右移：左端补符号位
- 逻辑右移：左端补0


## 2.2整数表示
- Unsigned values—U 无符号整数
- two's complement values—T 补码
#### 2.2.1 整型数据类型
- long的取值范围是唯一一个与机器相关的
- 正数负数取值范围不对称，负数比整数的范围大1
  - int：-2147 483 648 ~ 2147 483 647
  - unsigned：0 ~ 4294 967 295
- C++支持有符号（默认）和无符号，JAVA只支持有符号
#### 2.2.2 无符号数的编码
- $B2U_w(\vec{x})$函数：位向量$\rightarrow 十进制整数$
- 各位权重均为1
- UMax = 1111 = 15
- UMin = 0000 = 0
- 无符号数编码唯一性（函数双射）
#### 2.2.3 补码编码
- $B2T_w(\vec{x})$函数：位向量$\rightarrow 十进制整数$
- 最高位是符号位，权重为-1
- TMax = 0111 = 7
- TMin = 1000 = -8
- 无符号数编码唯一性（函数双射）
#### 2.2.4 有符号数和无符号数之间的转换
- 强制类型转换：数值改变，位表示不变
  - UMax和补码表示的-1有相同的位模式
#### 2.2.5 C语言中的有符号数和无符号数
- 显式强制类型转换
- 隐式强制类型转换：有符号数和无符号数运算会把有符号数强制转换位无符号数
- C语言中TMin的写法：-TMax-1（由补码不对称性+C语言的转换规则导致这么写TMin）
#### 2.2.6 扩展一个数的位表示
- 无符号数的的零扩展
- 补码数的符号扩展
#### 2.2.7 截断数字
- 相当于取模运算
#### 2.2.8 建议
- 少使用或不使用无符号数

## 2.3整数运算
#### 2.3.1 无符号加法
- 需要w+1位
- 大数相加溢出
#### 2.3.2 补码加法
- positive overflow
- negative overflow
- 检查符号位可判断是否溢出
- 减法永远不会溢出，只有大正数加大正数or大负数加大负数会溢出（大小指数值的绝对值）
#### 2.3.3 补码的非
- 加法逆元
#### 2.3.4 无符号乘法
- 需要2w位
- 等价于计算该值mod2
- 一般的乘法计算：$\times 2^n相当于左移n位，如\times 5 相当于左移两位+左移0位$
#### 2.3.5 补码乘法
- 和无符号乘法位级等价
#### 2.3.6 乘以常数
- 用移位和加法运算来代替常数因的乘法
- 例：$x*14$:
  利用$14=2^3+2^2+2^1$，编译器会把乘法重写为$(x<<3)+(x<<2)+(x<<1)$，  
  还可以利用$14=2^4-2^1写成(x<<4)-(x<<1)$
#### 2.3.7 除以2的幂
- 向下舍入
- 向上舍入
## 2.4浮点数